<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <!--
      manifest.json provides metadata used when your web app is added to the
      homescreen on Android. See https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json">
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
	<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAhr6d33cD2nT-d28dVYcyglYEc-YRCzls&callback=initMap"></script>
    <title>Budapest Eats</title>
  </head>
  <body>
    <noscript>
      You need to enable JavaScript to run this app.
    </noscript>
    <div id="root"></div>
	
	<header>
		<h1>Budapest Eats</h1>
	</header>
	
	<div class="flex-container">
		<aside id="search-list">
		
		
			<div id="search">
				<input type="text" placeholder="Search for a restaurant"/>
			</div>
			<div id="list">
				<ol>
					<li>Rapaz</li>
					<li>Bors</li>
					<li>Indigo</li>
				</ol>
			
			
			</div>
			
		</aside>
		<div id="map"></div>
	</div>
	<footer>
		<h3>Â© Bubicica designs and webz</h3>
	</footer>
	<script>
		
		// fetching user fake data
		fetch("https://randomuser.me/api").then(res => res.json()).then(myJson => console.log(myJson.results[0].nat));
	
	
		// locations array for the map
		const locations = [
		{title:'Indigo',location:{lat:47.4918275,lng:19.0391501}},
		{title:'Rapaz',location:{lat:47.4977522,lng:19.070250999999985}},
		{title:'Bors',location:{lat:47.4967267,lng:19.063548699999956}}
		];
		
		// this will hold the markers
		let markers = [];
		
		// a function to populate the infoWindows
		function addInfoToWindow (marker, infoWindow){
		if (infoWindow.marker != marker) {
			infoWindow.marker = marker;
			infoWindow.setContent('<div>' + marker.title + '</div>');
			infoWindow.open(map, marker);
		}
		
		
		}
		
		// creating the map
		let map;
		function initMap() {
		
			map = new google.maps.Map(document.getElementById('map'), {
			center: {lat:47.4918275, lng:19.0391501},
			zoom: 14	
			});
		
			let myInfoWindow = new google.maps.InfoWindow();
		
			for (var i = 0; i < locations.length; i++){
				let position = locations[i].location;
				let title = locations[i].title;
		
				var marker = new google.maps.Marker({
					position: position,
					map: map,
					title: title,
					id: i
				});
				
				// adding the markers to the array and adding them on onClick functionality
				markers.push(marker);
				marker.addListener('click', function(){
				
					/*setMap can remove the map property */
				
					this.setAnimation(google.maps.Animation.DROP)
					addInfoToWindow(this, myInfoWindow);		
				})
			}
		}
	
	
	</script>
  </body>
</html>
